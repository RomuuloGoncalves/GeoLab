"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7384],{7384:(R,p,i)=>{i.r(p),i.d(p,{PerguntasPageModule:()=>I});var g=i(177),m=i(4341),l=i(8974),u=i(1671),n=i(4438),P=i(901);let h=(()=>{var o;class r{constructor(t){this.Server=t}cadastrarPergunta(t){return this.Server.post("/views/perguntas/cadastrar.php",t)}coletarPerguntas(){return this.Server.get("/views/perguntas/listar.php")}}return(o=r).\u0275fac=function(t){return new(t||o)(n.KVO(P.Z))},o.\u0275prov=n.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),r})();var f=i(8397),v=i(8570),_=i(3427),F=i(2595),M=i(6159);const b=()=>["/perfil"];function j(o,r){if(1&o){const s=n.RV6();n.qex(0),n.j41(1,"ion-col",15)(2,"ion-row")(3,"ion-label",16),n.bIt("click",function(){const a=n.eBV(s).$implicit,e=n.XpG().index,c=n.XpG(2);return n.Njj(c.verificarPergunta(a.correta,e))}),n.EFF(4),n.k0s()()(),n.bVm()}if(2&o){const s=r.$implicit;n.R7$(4),n.SpI(" ",s.descricao," ")}}function z(o,r){if(1&o&&(n.qex(0),n.j41(1,"ion-col",4)(2,"ion-row",11)(3,"ion-col",12)(4,"ion-row",13)(5,"ion-label"),n.EFF(6),n.k0s()()(),n.j41(7,"ion-col",12)(8,"ion-row",14),n.DNE(9,j,5,1,"ng-container",10),n.k0s()()()(),n.bVm()),2&o){const s=r.$implicit;n.R7$(6),n.SpI(" ",s.enunciado," "),n.R7$(3),n.Y8G("ngForOf",s.opcoes)}}function T(o,r){if(1&o&&(n.qex(0),n.DNE(1,z,10,2,"ng-container",10),n.bVm()),2&o){const s=n.XpG();n.R7$(),n.Y8G("ngForOf",s.perguntasAleatorias)}}function k(o,r){1&o&&(n.j41(0,"ion-row",14)(1,"ion-col",17)(2,"ion-row",14)(3,"ion-label",18),n.EFF(4," N\xe3o h\xe1 mais perguntas para responder, tente gerar mais "),n.k0s()()()())}const y=[{path:"",component:(()=>{var o;class r{constructor(t,a,e){this.Perguntas=t,this.Toast=a,this.Usuario=e,this.loading=!0,this.perguntas=[],this.perguntasAleatorias=[],this.id_usuario=this.Usuario.id_usuario}ngOnInit(){this.coletarPerguntas(),this.recuperarPontos()}coletarPerguntas(){this.loading=!0,this.Perguntas.coletarPerguntas().subscribe(t=>{console.log("Dados cadastrados com sucesso!",t),this.loading=!1,this.perguntas=t,this.Toast.mostrarToast("success","Perguntas listadas com sucesso"),this.pegarPerguntasAleatorias(this.perguntas),console.log(this.perguntasAleatorias)},t=>{console.error("Erro ao coletar os dados:",t),this.loading=!1,this.Toast.mostrarToast("danger",t.error.message)})}pegarPerguntasAleatorias(t){const a=[],e={};for(;a.length<10;){const c=Math.floor(Math.random()*t.length);e[c]||(a.push(t[c]),e[c]=!0)}this.perguntasAleatorias=a}verificarPergunta(t,a){let e="danger",c="Que pena. Tente mais uma vez.";t&&(e="success",c="Parab\xe9ns. Voc\xea acertou!!!!",this.removerQuestao(a),this.pontos=this.pontos+2,this.somarPontoUsuario(this.pontos)),this.Toast.mostrarToast(e,c)}removerQuestao(t){this.perguntasAleatorias.splice(t,1)}recuperarPontos(){this.Usuario.coletarPontos(this.id_usuario).subscribe(t=>{console.log(t),this.pontos=t.pontos},t=>{console.log(t)})}somarPontoUsuario(t){console.log(t),this.Usuario.atualizarPontos({id:this.id_usuario,pontos:t}).subscribe(e=>{console.log(e),this.Toast.mostrarToast("success","Pontos atualizados")},e=>{console.error("Erro ao inserir os pontos:",e),this.loading=!1,this.Toast.mostrarToast("danger",e.error.message)})}}return(o=r).\u0275fac=function(t){return new(t||o)(n.rXU(h),n.rXU(f.f),n.rXU(v.o))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-perguntas"]],decls:20,vars:6,consts:[["sem_perguntas",""],[3,"fullscreen"],[3,"loading"],[1,"ion-align-items-center","ion-justify-content-center","ion-margin"],["size","12","sizeMd","10"],["expand","block","size","large","color","secondary",3,"click"],[4,"ngIf","ngIfElse"],["size","12","sizeMd","6"],["expand","block","size","large","color","warning",3,"click"],["expand","block","size","large","color","danger","routerDirection","back",3,"routerLink"],[4,"ngFor","ngForOf"],[1,"pergunta__container","ion-padding","ion-align-items-center","ion-justify-content-center"],["size","11"],[1,"titulo","ion-padding","ion-justify-content-center","ion-align-items-center"],[1,"ion-align-items-center","ion-justify-content-center"],["size","11","sizeMd","6"],["expand","block","size","large","color","tertiary","fill","outline",1,"alternativas",3,"click"],["size","12"],[1,"sem__perguntas"]],template:function(t,a){if(1&t){const e=n.RV6();n.j41(0,"ion-content",1)(1,"app-header"),n.EFF(2,"c"),n.k0s(),n.nrm(3,"app-loading",2),n.j41(4,"ion-row",3)(5,"ion-col",4)(6,"ion-button",5),n.bIt("click",function(){return n.eBV(e),n.Njj(a.pegarPerguntasAleatorias(a.perguntas))}),n.EFF(7," Atualizar Quest\xf5es "),n.k0s()(),n.DNE(8,T,2,1,"ng-container",6)(9,k,5,0,"ng-template",null,0,n.C5r),n.j41(11,"ion-col",4)(12,"ion-row")(13,"ion-col",7)(14,"ion-button",8),n.bIt("click",function(){return n.eBV(e),n.Njj(a.pegarPerguntasAleatorias(a.perguntas))}),n.EFF(15," Gerar Quest\xf5es "),n.k0s()(),n.j41(16,"ion-col",7)(17,"ion-button",9),n.EFF(18," Voltar ao Perfil "),n.k0s()()()()(),n.nrm(19,"app-footer"),n.k0s()}if(2&t){const e=n.sdS(10);n.Y8G("fullscreen",!0),n.R7$(3),n.Y8G("loading",a.loading),n.R7$(5),n.Y8G("ngIf",a.perguntasAleatorias.length>0)("ngIfElse",e),n.R7$(9),n.Y8G("routerLink",n.lJ4(5,b))}},dependencies:[g.Sq,g.bT,l.Jm,l.hU,l.W9,l.he,l.ln,l.N7,u.Wk,_.l,F.n,M.q],styles:[".titulo[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:2rem}.pergunta__container[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);border-radius:10px;padding:120px auto}.numero__pergunta[_ngcontent-%COMP%]{color:var(--ion-color-secondary);font-size:1.5rem;border-radius:25%}.sem__perguntas[_ngcontent-%COMP%]{font-size:2rem;min-height:70vh}.alternativas[_ngcontent-%COMP%]{border:3px var(--ion-color-secondary) solid;padding:20px;margin:10px;width:100%;cursor:pointer}.alternativas[_ngcontent-%COMP%]:hover{transition:.6s;background-color:#988ffd94;opacity:.8}"]}),r})()}];let E=(()=>{var o;class r{}return(o=r).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[u.iI.forChild(y),u.iI]}),r})();var A=i(8178),C=i(2898),G=i(7454);let I=(()=>{var o;class r{}return(o=r).\u0275fac=function(t){return new(t||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[g.MD,m.YN,l.bv,E,A.G,C.k,G.H]}),r})()}}]);
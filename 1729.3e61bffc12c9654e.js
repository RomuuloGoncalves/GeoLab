"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1729],{1729:(E,g,s)=>{s.r(g),s.d(g,{PerfilPageModule:()=>R});var v=s(177),u=s(4341),i=s(8974),d=s(1671),o=s(4438),p=s(901);let b=(()=>{var n;class a{constructor(e){this.Server=e}cadastrarDados(e){return this.Server.post("/views/arduino/cadastrar.php",e)}listarArduinoUsuario(e){return this.Server.get(`/views/arduino/listar_com_id.php?id=${e}`)}listarArduinoUsuarioSensor(e){return this.Server.get(`/views/arduino/arduino_e_sensor.php?id=${e}`)}excluirArduino(e){return this.Server.delete(`/views/arduino/excluir.php?id=${e}`)}}return(n=a).\u0275fac=function(e){return new(e||n)(o.KVO(p.Z))},n.\u0275prov=o.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})(),_=(()=>{var n;class a{constructor(e){this.Server=e}cadastrarDados(e){return this.Server.post("/views/sensor/cadastrar.php",e)}listarSensorArduino(e){return this.Server.get(`/views/sensor/listar_com_id.php?id=${e}`)}excluirSensor(e){return this.Server.delete(`/views/sensor/excluir.php?id=${e}`)}}return(n=a).\u0275fac=function(e){return new(e||n)(o.KVO(p.Z))},n.\u0275prov=o.jDH({token:n,factory:n.\u0275fac,providedIn:"root"}),a})();var f=s(8397),h=s(8570),P=s(2490),M=s(3427),C=s(1994),S=s(1855);const F=["atualizarForm"];function x(n,a){if(1&n){const r=o.RV6();o.j41(0,"div",3)(1,"h1"),o.EFF(2,"Atualize as informa\xe7\xf5es:"),o.k0s(),o.j41(3,"form",4,1),o.bIt("ngSubmit",function(){o.eBV(r);const t=o.XpG();return o.Njj(t.cadastrar())}),o.j41(5,"ion-row",5),o.nrm(6,"ion-input",6),o.k0s(),o.j41(7,"ion-row",5),o.nrm(8,"ion-input",7),o.k0s(),o.j41(9,"ion-row",5),o.nrm(10,"ion-input",8),o.k0s(),o.j41(11,"ion-row",9)(12,"ion-col",10),o.nrm(13,"app-btn-loading",11),o.k0s()(),o.j41(14,"ion-row",5),o.nrm(15,"ion-input",12),o.k0s()()()}if(2&n){const r=o.sdS(4),e=o.XpG();o.R7$(6),o.FS9("ngModel",e.nome),o.R7$(2),o.FS9("ngModel",e.email),o.R7$(2),o.FS9("ngModel",e.senha),o.R7$(3),o.Y8G("loading",e.loading)("disabled",!r.valid),o.R7$(2),o.FS9("ngModel",e.id_usuario)}}let O=(()=>{var n;class a{constructor(e,t,l,c,m){this.Usuario=e,this.Toast=t,this.router=l,this.Cookie=c,this.Mask=m,this.mascaraTelefone=this.Mask.mascaraTelefone,this.maskPredicate=this.Mask.maskPredicate,this.erros={},this.loading=!1}ngOnInit(){}cadastrar(){this.loading=!0;const e=this.atualizarForm.form.value;console.log(e),this.Usuario.atualizarDados(e).subscribe(t=>{this.loading=!1,this.Toast.mostrarToast("success","Atualizado realizado com sucesso");const m=new Date;m.setDate(m.getDate()+15),this.Cookie.delete("nome_usuario"),this.Cookie.set("nome_usuario",e.nome,{expires:m}),this.atualizarForm.reset(),this.router.navigate(["/perfil"]),setTimeout(()=>{location.reload()},200)},t=>{console.error("Erro ao atualizar os dados:",t),this.loading=!1,this.Toast.mostrarToast("danger","Algo deu errado!")})}}return(n=a).\u0275fac=function(e){return new(e||n)(o.rXU(h.o),o.rXU(f.f),o.rXU(d.Ix),o.rXU(P.O),o.rXU(C.s))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-atualizar-perfil"]],viewQuery:function(e,t){if(1&e&&o.GBs(F,5),2&e){let l;o.mGM(l=o.lsd())&&(t.atualizarForm=l.first)}},inputs:{nome:"nome",email:"email",id_usuario:"id_usuario",senha:"senha",telefone:"telefone"},decls:3,vars:0,consts:[["modal",""],["atualizarForm","ngForm"],["id","example-modal","trigger","open-custom-dialog"],[1,"wrapper"],[3,"ngSubmit"],[1,"input-container"],["name","nome","label","Nome:","label-placement","floating","type","text","fill","outline",3,"ngModel"],["name","email","label","E-mail:","label-placement","floating","type","text","fill","outline",3,"ngModel"],["name","senha","label","Senha","label-placement","floating","fill","outline","type","text",3,"ngModel"],[1,"ion-justify-content-center","ion-padding"],["size","auto"],["btnNome","Atualizar",3,"loading","disabled"],["name","id","type","hidden",3,"ngModel"]],template:function(e,t){1&e&&(o.j41(0,"ion-modal",2,0),o.DNE(2,x,16,6,"ng-template"),o.k0s())},dependencies:[u.qT,u.BC,u.cb,u.vS,u.cV,i.hU,i.$w,i.ln,i.Sb,i.Gw,S._],styles:["ion-modal#example-modal[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:20px 20px 10px}ion-modal#example-modal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px;width:48px;height:48px;padding:4px 0;color:#aaa}ion-modal#example-modal[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]{margin-bottom:10px}ion-modal#example-modal[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:40px}ion-modal#example-modal[_ngcontent-%COMP%]   .wrapper[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ion-row[_ngcontent-%COMP%]{margin:10px 0}"]}),a})();const k=["imagemForm"],j=()=>["/perguntas"],z=()=>["/listagem"],y=()=>["/ranking"];function U(n,a){if(1&n){const r=o.RV6();o.j41(0,"ion-content",20)(1,"ion-col")(2,"form",21,0),o.bIt("ngSubmit",function(){o.eBV(r);const t=o.XpG();return o.Njj(t.mudarImagem())}),o.j41(4,"ion-row",22)(5,"ion-input",23,1),o.bIt("change",function(t){o.eBV(r);const l=o.XpG();return o.Njj(l.selecionarArqs(t))}),o.k0s()(),o.j41(7,"ion-button",24),o.EFF(8," Alterar foto "),o.k0s()()()()}}const A=[{path:"",component:(()=>{var n;class a{constructor(e,t,l,c,m,I){this.Arduino=e,this.Sensor=t,this.Toast=l,this.Usuario=c,this.Cookie=m,this.alertController=I,this.loading=!1,this.arduinos=[],this.nome_usuario=this.Usuario.nome_usuario,this.id_usuario=this.Usuario.id_usuario,this.quantidade_pontos=0,this.arqsSelecionados=[]}ngOnInit(){this.carregarPerfil()}carregarPerfil(){this.Usuario.pegarUsuario(this.Usuario.id_usuario).subscribe(e=>{console.log("user",e),this.usuario=e,this.usuario.imagem=this.Usuario.pegarImagem(this.usuario.imagem),console.log(this.usuario.imagem)},e=>{console.log(e),this.loading=!1})}selecionarArqs(e){this.arqsSelecionados=e.target.files}mudarImagem(){const e=this.imagemForm.form.value;e.imagem=this.arqsSelecionados[0],e.id=this.id_usuario,console.log(e),this.Usuario.alterarImagem(e).subscribe(t=>{console.log(t),location.reload(),this.Toast.mostrarToast("success","Imagem alterada com sucesso")},t=>{console.log(t),this.Toast.mostrarToast("danger","Erro ao trocar imagem!")})}}return(n=a).\u0275fac=function(e){return new(e||n)(o.rXU(b),o.rXU(_),o.rXU(f.f),o.rXU(h.o),o.rXU(P.O),o.rXU(i.hG))},n.\u0275cmp=o.VBU({type:n,selectors:[["app-perfil"]],viewQuery:function(e,t){if(1&e&&o.GBs(k,5),2&e){let l;o.mGM(l=o.lsd())&&(t.imagemForm=l.first)}},decls:35,vars:15,consts:[["imagemForm","ngForm"],["inputArqs",""],[3,"fullscreen"],[1,"ion-justify-content-center","ion-align-items-center","ion-margin-vertical"],["size","11"],[1,"ion-justify-content-center","ion-align-items-center"],["size","auto","id","trigger-button"],["alt","Avatar",3,"src"],["size","auto"],["size","12"],["trigger","trigger-button"],[1,"2"],[1,"ion-align-items-center"],["id","open-custom-dialog"],["size","large","name","create-outline"],[3,"nome","id_usuario","telefone","email","senha"],[1,"ion-justify-content-center"],["size","11",1,"lista","ion-padding"],["size","12","sizeMd","4"],["size","large","color","secondary","expand","block","routerDirection","back",3,"routerLink"],[1,"ion-padding"],[3,"ngSubmit"],[1,"input-container"],["type","file","id","file","label","Imagem","label-placement","floating","fill","outline","placeholder","Escolhe a imagem do produto","type","file",1,"input__file",3,"change"],["type","ngSubmit","expand","block","size","medium","color","dark","fill","outline",1,"add__button"]],template:function(e,t){1&e&&(o.j41(0,"ion-content",2),o.nrm(1,"app-header"),o.j41(2,"ion-row",3)(3,"ion-col",4)(4,"ion-row",5)(5,"ion-col",6)(6,"ion-avatar"),o.nrm(7,"ion-img",7),o.k0s()(),o.j41(8,"ion-col",8)(9,"ion-row",5)(10,"ion-col",9)(11,"ion-label"),o.EFF(12),o.k0s()(),o.j41(13,"ion-col",9)(14,"ion-label"),o.EFF(15),o.k0s()()()(),o.j41(16,"ion-popover",10),o.DNE(17,U,9,0,"ng-template"),o.k0s(),o.j41(18,"ion-col",11)(19,"ion-row",12)(20,"ion-button",13),o.nrm(21,"ion-icon",14),o.k0s(),o.nrm(22,"app-atualizar-perfil",15),o.k0s()()()()(),o.j41(23,"ion-row",16)(24,"ion-col",17)(25,"ion-row",16)(26,"ion-col",18)(27,"ion-button",19),o.EFF(28,"Responder Quest\xf5es"),o.k0s()(),o.j41(29,"ion-col",18)(30,"ion-button",19),o.EFF(31,"Explorar Formas"),o.k0s()(),o.j41(32,"ion-col",18)(33,"ion-button",19),o.EFF(34,"Ranking"),o.k0s()()()()()()),2&e&&(o.Y8G("fullscreen",!0),o.R7$(7),o.FS9("src",null==t.usuario?null:t.usuario.imagem),o.R7$(5),o.SpI(" ",t.nome_usuario," "),o.R7$(3),o.SpI(" ",null==t.usuario?null:t.usuario.pontos," PTS "),o.R7$(7),o.Y8G("nome",null==t.usuario?null:t.usuario.nome)("id_usuario",null==t.usuario?null:t.usuario.id_usuario)("telefone",null==t.usuario?null:t.usuario.telefone)("email",null==t.usuario?null:t.usuario.email)("senha",null==t.usuario?null:t.usuario.senha),o.R7$(5),o.Y8G("routerLink",o.lJ4(12,j)),o.R7$(3),o.Y8G("routerLink",o.lJ4(13,z)),o.R7$(3),o.Y8G("routerLink",o.lJ4(14,y)))},dependencies:[u.qT,u.cb,u.cV,i.mC,i.Jm,i.hU,i.W9,i.iq,i.KW,i.$w,i.he,i.ln,i.CF,i.Gw,i.N7,d.Wk,M.l,O],styles:[".lista[_ngcontent-%COMP%]{box-shadow:1px 1px 20px #0000002a;border-radius:5px}.icone[_ngcontent-%COMP%]{padding:5px;border-radius:5px}.icone[_ngcontent-%COMP%]:hover{cursor:pointer}.add__button[_ngcontent-%COMP%]{color:#0054e9}.editar[_ngcontent-%COMP%]{background-color:var(--ion-color-success)}.excluir[_ngcontent-%COMP%]{background-color:var(--ion-color-danger)}ion-alert.custom-alert[_ngcontent-%COMP%]{--backdrop-opacity: .7}.custom-alert[_ngcontent-%COMP%]   .alert-button-group[_ngcontent-%COMP%]{padding:8px}button.alert-button.alert-button-confirm[_ngcontent-%COMP%]{background-color:var(--ion-color-success);color:var(--ion-color-success-contrast)}.md[_ngcontent-%COMP%]   button.alert-button.alert-button-confirm[_ngcontent-%COMP%]{border-radius:4px}.ios[_ngcontent-%COMP%]   .custom-alert[_ngcontent-%COMP%]   button.alert-button[_ngcontent-%COMP%]{border:.55px solid rgba(var(--ion-text-color-rgb, 0, 0, 0),.2)}.ios[_ngcontent-%COMP%]   button.alert-button.alert-button-cancel[_ngcontent-%COMP%]{border-right:0;border-bottom-left-radius:13px;border-top-left-radius:13px}.ios[_ngcontent-%COMP%]   button.alert-button.alert-button-confirm[_ngcontent-%COMP%]{border-bottom-right-radius:13px;border-top-right-radius:13px}"]}),a})()}];let w=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[d.iI.forChild(A),d.iI]}),a})();var T=s(8178),$=s(7006),G=s(2898);let R=(()=>{var n;class a{}return(n=a).\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.$C({type:n}),n.\u0275inj=o.G2t({imports:[v.MD,u.YN,i.bv,w,T.G,$.p,G.k]}),a})()}}]);